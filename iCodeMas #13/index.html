<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>iCodeMas #13</title>
  </head>
  <body class="w-screen h-screen bg-[#9ca6b0] flex items-center justify-center">
    <div class="w-10/12 max-w-xs h-40 bg-white rounded-2xl">
      <header class="w-full p-3 bg-[#237393] rounded-t-2xl">
        <h1 class="text-white text-center text-xl">Virtual Assistant</h1>
        <p class="text-slate-300 text-xs text-center w-10/12 mx-auto">
          Our virtal assistant is ready to assist you, making your online
          experience seamless and enjoyable
        </p>
      </header>
      <div class="bg-white h-64 p-4 flex flex-col overflow-y-scroll">
        <div class="max-w-[220px] w-fit h-fit bg-[#eff3f6] my-2 p-2">
          <p class="font-light text-slate-800">Hi there</p>
        </div>
        <div class="max-w-[220px] w-fit h-fit bg-[#eff3f6] my-2 p-2">
          <p class="font-light text-slate-800">What can I help you with?</p>
        </div>
        <div class="max-w-[220px] w-fit h-fit bg-[#dff4fd] my-2 p-2 self-end">
          <p class="font-light text-slate-800">Hello, Santa!</p>
        </div>
        <div class="max-w-[220px] w-fit h-fit bg-[#dff4fd] my-2 p-2 self-end">
          <p class="font-light text-slate-800">
            I'd like to know when you'll bring my gift
          </p>
        </div>
      </div>
      <hr class="h-px bg-gray-500" />
      <div
        class="bg-white h-fit rounded-b-2xl flex items-center justify-between"
      >
        <input
          type="text"
          id="text-term"
          class="rounded-b-2xl w-full focus:outline-none placeholder:text-xs text-xs p-3"
          placeholder="What can I help you with?"
        />
        <i
          class="fa-solid fa-paper-plane m-4 cursor-pointer text-[#237393]"
          onclick="sendText()"
        ></i>
      </div>
    </div>
    <script>
      // Represents replies sent by an API for real-time chat
      const replies = [
        "Good morning",
        "How are you?",
        "I am fine thank you",
        "What can I help you with?",
        "This is a sample response from Santa",
      ];

      function sendText() {
        // Get the text from the input
        let text = document.getElementById("text-term").value;
        if (text.length > 0) {
          // Create a div element with the class lists for a sent text
          let div = document.createElement("div");
          div.classList.add(
            "max-w-[220px]",
            "w-fit",
            "h-fit",
            "bg-[#dff4fd]",
            "my-2",
            "p-2",
            "self-end"
          );
          //   Create the inner <p> element that will hold the text
          let p = document.createElement("p");
          p.classList.add("font-light", "text-slate-800");
          //   Set the text to the inner <p> element
          p.innerText = text;
          //   Append the <p> element to the <div> element
          div.appendChild(p);
          //   Append the <div> element to the chat
          document
            .querySelector(".bg-white.h-64.p-4.flex.flex-col.overflow-y-scroll")
            .appendChild(div);
          document.getElementById("text-term").value = "";
        }
        //   Wait for 1 second before sending a reply
        setTimeout(() => {
          sendReply();
        }, 1000);
      }

      function sendReply() {
        // Create a div element with the class lists for a received text
        let div = document.createElement("div");
        div.classList.add(
          "max-w-[220px]",
          "w-fit",
          "h-fit",
          "bg-[#eff3f6]",
          "my-2",
          "p-2"
        );
        //   Create the inner <p> element that will hold the text
        let p = document.createElement("p");
        p.classList.add("font-light", "text-slate-800");
        //   Set the reply to any random element from the replies array
        p.innerText = replies[Math.floor(Math.random() * replies.length)];
        //   Append the text <p> element to the <div> element
        div.appendChild(p);
        document
          .querySelector(".bg-white.h-64.p-4.flex.flex-col.overflow-y-scroll")
          .appendChild(div)
          .scrollIntoView();
      }

      //   Listen for the enter key to be pressed
      document.getElementById("text-term").addEventListener("keyup", (e) => {
        if (e.key === "Enter") {
          sendText();
        }
      });

      document
        .querySelector(".bg-white.h-64.p-4.flex.flex-col.overflow-y-scroll")
        .scrollIntoView();
    </script>
  </body>
</html>
